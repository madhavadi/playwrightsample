<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Playwright Automation Summary Dashboard - madhavadi/playwrightsample</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f6f8; color: #222; }
    header { background: #0b5cff; color: #fff; padding: 18px 24px; }
    .container { padding: 20px; max-width: 1200px; margin: 0 auto; }
    .controls { display:flex; gap:12px; align-items:center; margin-bottom:18px; flex-wrap:wrap; }
    .card { background: #fff; border-radius: 8px; padding: 16px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
    .grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; margin-bottom:16px; }
    .full { grid-column: 1 / -1; }
    h2 { margin:0 0 12px 0; font-size:18px; color: #0b5cff; }
    canvas { width:100% !important; height: 260px !important; }
    table { width:100%; border-collapse:collapse; margin-top:8px; }
    th, td { text-align:left; padding:8px; border-bottom:1px solid #eee; font-size:13px; }
    .tabs { display:flex; gap:8px; margin-bottom:12px; }
    .tab { padding:8px 12px; background:#e9eefc; border-radius:6px; cursor:pointer; color:#0b5cff; }
    .tab.active { background:#0b5cff; color:#fff; }
    .kpi-grid { display:flex; gap:12px; margin-bottom:16px; }
    .kpi { flex:1; padding:12px; border-radius:8px; background:#fff; text-align:center; border: 1px solid #d8e1ff; }
    .kpi .value { font-size:24px; font-weight:700; color: #222; }
    .filter { padding:8px 10px; border-radius:6px; border:1px solid #d8e1ff; background:#fff; }
    footer { text-align:center; padding:14px; color:#666; font-size:13px; }
    @media (max-width:900px){ .grid{ grid-template-columns: 1fr; } .kpi-grid{ flex-direction:column; } }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <h1 style="margin:0; font-size:20px;">Playwright Automation Summary Dashboard</h1>
      <div style="font-size:13px; opacity:0.9;">Project: madhavadi/playwrightsample | Environment: QA</div>
    </div>
  </header>

  <div class="container">
    <div class="card">
      <div class="tabs" id="tabs">
        <div class="tab active" data-tab="overview">Overview</div>
        <div class="tab" data-tab="web">Web</div>
        <div class="tab" data-tab="api">API</div>
        <div class="tab" data-tab="mobile">Mobile</div>
        <div class="tab" data-tab="ci">CI/CD History</div>
      </div>

      <div class="controls">
        <label>Environment:
          <select id="envSelect" class="filter">
            <option value="All">All</option>
            <option value="Dev">Dev</option>
            <option value="QA" selected>QA</option>
            <option value="Stage">Stage</option>
            <option value="Prod">Prod</option>
          </select>
        </label>

        <label>Week:
          <select id="weekSelect" class="filter">
            <option value="All">All</option>
            <option value="Week1">Week 1</option>
            <option value="Week2">Week 2</option>
            <option value="Week3">Week 3</option>
            <option value="Week4">Week 4</option>
            <option value="Week5">Week 5</option>
            <option value="Week6" selected>Week 6</option>
          </select>
        </label>

        <label>Channel:
          <select id="channelSelect" class="filter">
            <option value="All" selected>All Channels</option>
            <option value="Web">Web</option>
            <option value="API">API</option>
            <option value="Mobile">Mobile</option>
          </select>
        </label>

        <button id="resetBtn" style="margin-left:auto; padding:8px 12px; border-radius:6px; border:none; background:#0b5cff; color:#fff; cursor:pointer;">Reset Filters</button>
      </div>

      <div class="kpi-grid">
        <div class="kpi card">
          <div style="font-size:12px;color:#666;">Total Test Cases</div>
          <div class="value" id="kpi-total">36</div>
          <div style="font-size:12px;color:#777;">(Unique Scenarios)</div>
        </div>
        <div class="kpi card">
          <div style="font-size:12px;color:#666;">Pass Rate</div>
          <div class="value" id="kpi-pass">97.2%</div>
          <div style="font-size:12px;color:#777;">(175/180 Executions)</div>
        </div>
        <div class="kpi card">
          <div style="font-size:12px;color:#666;">Open Defects</div>
          <div class="value" id="kpi-defects">1</div>
          <div style="font-size:12px;color:#777;">(Severity 1)</div>
        </div>
      </div>

      <div class="grid">
        <div class="card">
          <h2>Execution Trend (Last 6 Weeks)</h2>
          <canvas id="trendChart"></canvas>
        </div>

        <div class="card">
          <h2>Test Distribution by Channel</h2>
          <canvas id="doughnutChart"></canvas>
        </div>

        <div class="card">
          <h2>Defect Severity Breakdown</h2>
          <canvas id="barChart"></canvas>
        </div>

        <div class="card full">
          <h2>Recent Runs & CI/CD Status</h2>
          <table id="runsTable">
            <thead><tr><th>Run ID</th><th>Date</th><th>Channel</th><th>Env</th><th>Status</th><th>Passed</th><th>Failed</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card">
          <h2>Top 5 Failing Tests (QA)</h2>
          <table id="failTable">
            <thead><tr><th>Test Case</th><th>Channel</th><th>Last Failure</th><th>Fail Count</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card">
          <h2>Test Coverage (Functional)</h2>
          <canvas id="coverageChart"></canvas>
        </div>
      </div>

    </div> <footer>Interactive HTML Dashboard â€” Project: madhavadi/playwrightsample. Ready for GitHub Pages deployment.</footer>
  </div>

<script>
// =========================================================================
// !!! IMPORTANT: EDIT THIS OBJECT TO USE YOUR REAL DATA !!!
// Total Tests (Unique): 36. Total Executions (36 * 5): 180.
// =========================================================================
const sampleData = {
  // Update this array with your last 5-10 CI runs
  runs: [
    // Latest Run: 175 Passed, 5 Failed/Skipped. Total Executions: 180.
    {id: 'run-015', date: '25/11/2025', channel: 'Web', env:'QA', status:'Failed', passed: 175, failed: 5}, 
    {id: 'run-014', date: '24/11/2025', channel: 'API', env:'QA', status:'Passed', passed: 180, failed: 0},
    {id: 'run-013', date: '23/11/2025', channel: 'Mobile', env:'QA', status:'Passed', passed: 180, failed: 0},
    {id: 'run-012', date: '22/11/2025', channel: 'Web', env:'Stage', status:'Passed', passed: 180, failed: 0},
    {id: 'run-011', date: '21/11/2025', channel: 'API', env:'Dev', status:'Passed', passed: 178, failed: 2} // Older failure
  ],
  
  // Growth trend based on 36 unique tests
  trend: {
    weeks: ['Week1','Week2','Week3','Week4','Week5','Week6'],
    executed: [90, 120, 150, 180, 180, 180], // Total executions (tests * browsers)
    passed: [90, 118, 148, 178, 180, 175]
  },
  
  // Test Distribution (Unique tests only)
  distribution: {Web: 28, API: 4, Mobile: 4}, // Total: 36 unique tests
  
  // Update with your current open defects (based on 5 skipped tests)
  defects: {S1: 1, S2: 0, S3: 0}, 
  
  // Top 5 Failing Tests (Based on the 5 skipped/failed executions)
  failures: [
    {test:'E2E Login flow', channel:'Web', last:'25/11/2025', count:5}, // 5 failures (one per browser)
    {test:'Checkout - Tax calculation', channel:'Web', last:'21/11/2025', count:2}, 
  ],
  
  // Update with your actual coverage percentages
  coverage: {
    labels: ['Core Flows','Edge Cases','Regressions','Browser Support'],
    coverage: [98, 70, 90, 100]
  }
};
// =========================================================================
// !!! DO NOT EDIT BELOW THIS LINE - DASHBOARD LOGIC !!!
// =========================================================================

function applyFilters() {
  const env = document.getElementById('envSelect').value;
  const week = document.getElementById('weekSelect').value;
  const channel = document.getElementById('channelSelect').value;

  const runs = sampleData.runs.filter(r => (env==='All' || r.env===env) && (channel==='All' || r.channel===channel));
  
  updateKpis(runs);
  populateRunsTable(runs);
  populateFailTable(sampleData.failures.filter(f => channel==='All' || f.channel===channel));
  updateCharts(channel);
}

function updateKpis(runs) {
  const total = Object.values(sampleData.distribution).reduce((a, b) => a + b, 0); 
  const openDefects = sampleData.defects.S1 + sampleData.defects.S2 + sampleData.defects.S3;

  const lastRun = runs.length > 0 ? runs[0] : {passed: 0, failed: 0};
  const lastTotal = lastRun.passed + lastRun.failed;
  let passRate = lastTotal ? Math.round((lastRun.passed/lastTotal)*1000)/10 : 100; 

  document.getElementById('kpi-total').textContent = total;
  document.getElementById('kpi-pass').textContent = passRate + '%';
  document.getElementById('kpi-defects').textContent = openDefects;
  
  const passKpi = document.getElementById('kpi-pass');
  passKpi.style.color = passRate >= 95 ? '#2da44e' : (passRate >= 90 ? '#a4982d' : '#f14c4c');
}

function populateRunsTable(runs) {
  const tbody = document.querySelector('#runsTable tbody');
  tbody.innerHTML = '';
  runs.slice(0, 10).forEach(r=>{
    const tr = document.createElement('tr');
    tr.style.color = r.status === 'Passed' ? '#2da44e' : '#f14c4c';
    tr.innerHTML = `<td>${r.id}</td><td>${r.date}</td><td>${r.channel}</td><td>${r.env}</td><td>${r.status}</td><td>${r.passed}</td><td>${r.failed}</td>`;
    tbody.appendChild(tr);
  });
}

function populateFailTable(items) {
  const tbody = document.querySelector('#failTable tbody');
  tbody.innerHTML = '';
  items.slice(0, 5).forEach(it=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${it.test}</td><td>${it.channel}</td><td>${it.last}</td><td>${it.count}</td>`;
    tbody.appendChild(tr);
  });
}

let trendChart, doughnutChart, barChart, coverageChart;

function createCharts() {
  const tctx = document.getElementById('trendChart').getContext('2d');
  trendChart = new Chart(tctx, {
    type: 'line',
    data: {
      labels: sampleData.trend.weeks,
      datasets: [
        {label:'Executed', data: sampleData.trend.executed, fill:false, tension:0.3, borderColor: '#0b5cff'},
        {label:'Passed', data: sampleData.trend.passed, fill:true, tension:0.3, backgroundColor: 'rgba(45, 164, 78, 0.2)', borderColor: '#2da44e'}
      ]
    },
    options: { responsive:true, plugins:{legend:{position:'top'}}}
  });

  const dctx = document.getElementById('doughnutChart').getContext('2d');
  doughnutChart = new Chart(dctx, {
    type: 'doughnut',
    data: { 
        labels: Object.keys(sampleData.distribution), 
        datasets: [{ 
            data: Object.values(sampleData.distribution),
            backgroundColor: ['#0b5cff', '#5860ff', '#8d94ff']
        }] 
    },
    options: { responsive:true, plugins:{legend:{position:'bottom'}} }
  });

  const bctx = document.getElementById('barChart').getContext('2d');
  barChart = new Chart(bctx, {
    type: 'bar',
    data: { 
        labels: Object.keys(sampleData.defects), 
        datasets: [{ 
            label:'Open Defects', 
            data: Object.values(sampleData.defects),
            backgroundColor: ['#f14c4c', '#d18616', '#a4982d']
        }] 
    },
    options: { responsive:true, plugins:{legend:{display:false}} }
  });

  const cctx = document.getElementById('coverageChart').getContext('2d');
  coverageChart = new Chart(cctx, {
    type: 'bar',
    data: { 
        labels: sampleData.coverage.labels, 
        datasets: [{ 
            label:'Coverage %', 
            data: sampleData.coverage.coverage,
            backgroundColor: '#2da44e'
        }] 
    },
    options: { responsive:true, plugins:{legend:{display:false}}, scales:{y:{max:100}} }
  });
}

function updateCharts(channel){
  if(channel === 'All'){
    doughnutChart.data.datasets[0].data = Object.values(sampleData.distribution);
  } else {
    const labels = Object.keys(sampleData.distribution);
    const data = labels.map(label => label === channel ? sampleData.distribution[label] : 0);
    doughnutChart.data.datasets[0].data = data;
  }
  doughnutChart.update();
}

document.getElementById('tabs').addEventListener('click', (e)=>{
  if(!e.target.classList.contains('tab')) return;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  e.target.classList.add('active');
  const tab = e.target.dataset.tab;
  if(tab === 'ci') {
    document.getElementById('envSelect').value = 'All';
    document.getElementById('channelSelect').value = 'All';
  }
  applyFilters();
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  document.getElementById('envSelect').value = 'All';
  document.getElementById('weekSelect').value = 'All';
  document.getElementById('channelSelect').value = 'All';
  applyFilters();
});

document.getElementById('envSelect').addEventListener('change', applyFilters);
document.getElementById('weekSelect').addEventListener('change', applyFilters);
document.getElementById('channelSelect').addEventListener('change', applyFilters);

createCharts();
applyFilters();

</script>
</body>
</html>